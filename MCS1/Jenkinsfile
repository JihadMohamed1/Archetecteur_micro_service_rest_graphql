def gv

pipeline{
  agent any
  
  parameters{
    choice( name : 'VERSION' , choices : ['1.1.0','1.1.1'], description : '')
    booleanParam( name : 'executeTests' , defaultValue : true , description : '')
  }
  stages{
        stage("init"){
      steps{
        echo 'here'
       script{
         gv = load "MCS1/script.groovy"
       }
        echo 'here end'
            }
                 }
    stage("build"){
      steps{
        script{
        gv.buildApp()
        }
            }
                 }
    stage("test"){
      when{
        expression{
          params.executeTests
        }
      }
      steps{
        script{
       gv.testApp()
        }
            }
                 }
    stage("deploy"){
      input{
        message "select deployment env"
        ok "DONE"
          parameters{choice( name : 'env' , choices : ['dev','test','prod], description : '')}
      }
      steps{
        script{
        gv.deployApp()
        }
            }
                 }
  }
  
}
